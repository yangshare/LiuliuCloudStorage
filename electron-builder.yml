appId: com.liuliu.cloudstorage
productName: 溜溜网盘
copyright: Copyright © 2026 ${author}

directories:
  output: dist
  buildResources: build

extraResources:
  - from: build/icon.ico
    to: icon.ico
  - from: src/assets/icons
    to: assets/icons

files:
  - dist-electron
  - dist
  - package.json
  - "!dist/*.exe"
  - "!dist/*.zip"
  - "!dist/*.7z"
  - "!dist/*.blockmap"
  - "!dist/*.yml"
  - "!dist/win-unpacked"
  - "!dist/builder-*.yml"
  - "!dist/builder-*.yaml"

win:
  icon: build/icon.ico
  target:
    - target: nsis
      arch:
        - x64
    # 便携版（绿色版）- 无需安装，无签名警告
    - target: portable
      arch:
        - x64
    # 压缩包版本
    - target: zip
      arch:
        - x64
  # 代码签名配置（可选，如果没有证书可以注释掉）
  # 如果需要签名，取消下面的注释并配置 .env.local 文件
  # certificateFile: ${env.WIN_CSC_LINK}
  # certificatePassword: ${env.WIN_CSC_KEY_PASSWORD}
  # signingHashAlgorithms:
  #   - sha256
  # rfc3161TimeStampServer: http://timestamp.digicert.com

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  perMachine: true
  deleteAppDataOnUninstall: true
  # NSIS安装程序也需要签名
  warningsAsErrors: false
  artifactName: LiuliuCloudStorage-Setup-${version}.${ext}

portable:
  artifactName: LiuliuCloudStorage-Portable-${version}.${ext}

# 禁用自动发布，使用 GitHub Actions 的 softprops/action-gh-release 来上传
# publish:
#   provider: github
#   owner: yangc91
#   repo: liuliu-cloud-storage
#   releaseType: release
